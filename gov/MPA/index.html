<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun&display=swap " rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="index.css">
</head>
<body>
    <div id="loader">
      <div class="spinner"></div>
    </div>
    <main id="main-content">
        <div id="loading-popup" style="display: none;" class="loading-overlay">
          <div class="loading-box"><img src="loading.gif"><p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p></div>
        </div>
        <header>
          <div class="logo">
            <img src="logo.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á">
            <span>‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á</span>
          </div>
          <nav>
            <ul>
              <li><a href="#">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
              <li>
                <a href="#" class="dropdown-toggle">‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏° <i class="fa-solid fa-caret-down"></i></a>
                <ul class="dropdown-menu">
                  <li><a href="#">‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô</a></li>
                </ul>
              </li>
            </ul>
          </nav>
          <div class="menu-toggle">
              <i class="fa-solid fa-bars"></i>
          </div>
        </header>
        
    
        <section class="container">
            <section>
                <h2>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô</h2>
                <form id="land-registration-form">
                    <div>
                        <label for="person-select">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á:</label>
                        <select id="person-select">
                            <option value="">-- ‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• --</option>
                        </select>
                    </div>
        
                    <div>
                        <label>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠:</label>
                        <input type="text" id="district-display" readonly>
                    </div>
        
                    <div>
                        <label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</label>
                        <input type="text" id="province-display" readonly>
                    </div>
        
                    <div>
                        <label for="subdistrict-select">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á:</label>
                        <select id="subdistrict-select" disabled>
                            <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á --</option>
                        </select>
                    </div>
        
                    <div>
                        <label for="plot-select">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô:</label>
                        <select id="plot-select" disabled>
                            <option value="">-- ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô --</option>
                        </select>
                        <div id="plot-status"></div>
                    </div>
        
                    <button type="submit" id="submit-btn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
                    <div id="button-status" class="status">‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
                </form>
            </section>
        
            <section>
                <h2>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô</h2>
                <div class="table">
                    <table id="registrations-table">
                      <thead>
                        <tr>
                          <th>‡∏£‡∏´‡∏±‡∏™</th>
                          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
                          <th>‡∏≠‡∏≥‡πÄ‡∏†‡∏≠</th>
                          <th>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
                          <th>‡∏ï‡∏≥‡∏ö‡∏•</th>
                          <th>‡πÅ‡∏õ‡∏•‡∏á</th>
                          <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                        </tr>
                      </thead>
                      <tbody id="registrations-table-body"></tbody>
                    </table>
                </div>
            </section>
        </section>
        
        <footer>
            <div class="container">
                <p>¬© 2023 ‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á. ‡∏™‡∏á‡∏ß‡∏ô‡∏•‡∏¥‡∏Ç‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå.</p>
            </div>
        </footer>
        
        <!-- ‡∏õ‡∏∏‡πà‡∏° Login -->
        <div class="btn btn-login" id="login">
          <i class="fa-solid fa-lock"></i>
        </div>
        
        <!-- Popup Login Form -->
        
        <div id="login-section" style="display: none;">
            <div class="admin-section">
                <div class="container">
                  <h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</h2>
                  <div class="form-group">
                    <label for="admin-username">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:</label>
                    <input type="text" id="admin-username" required>
                  </div>
                  <div class="form-group">
                    <label for="admin-password">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:</label>
                    <input type="password" id="admin-password" required>
                  </div>
                  <div class="form-group">
                    <button type="submit" id="login-btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                  </div>
                    <div id="close-popup">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
            <div id="admin-dashboard">
                <div class="container">
                    <h2>‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h2>
                    <div class="form-group">
                        <label for="registration-status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô:</label>
                        <select id="registration-status">
                            <option value="open">‡πÄ‡∏õ‡∏¥‡∏î</option>
                            <option value="closed">‡∏õ‡∏¥‡∏î</option>
                        </select>
                    </div>
                    <div class="admin-actions">
                        <button id="save-settings-btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
                    </div>
                    <div id="close">
                        <i class="fa-solid fa-xmark"></i>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
      const scriptURL = "https://script.google.com/macros/s/AKfycbzeyQEy2TbJLFtgIXjqFrt4Pw9_qUJ-ROYCN_yRjfr3UytcOOuEPDHrp-BauZKL6iLw9w/exec"; // üîÅ ‡πÉ‡∏™‡πà URL ‡∏à‡∏≤‡∏Å Deploy Web App
    
      // 1. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏•‡∏•‡πå B1
      document.getElementById("save-settings-btn").addEventListener("click", () => {
        const status = document.getElementById("registration-status").value;
    
        fetch(scriptURL, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({ status: status }),
        })
        .then((res) => res.text())
        .then((text) => {
          console.log("Response from GAS:", text);
          alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
        })
        .catch((err) => {
          console.error("Error:", err);
          alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å");
        });
      });
    
      // 2. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å B1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏∏‡πà‡∏° submit ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
      window.addEventListener("DOMContentLoaded", () => {
        fetch(scriptURL)
          .then((res) => res.text())
          .then((status) => {
            const submitBtn = document.getElementById("submit-btn");
            if (status.trim().toLowerCase() === "open") {
              submitBtn.disabled = false;
            } else {
              submitBtn.disabled = true;
            }
          })
          .catch((err) => console.error("Error fetching status:", err));
      });

        setTimeout(function () {
          const submitBtn = document.getElementById("submit-btn");
          const statusDiv = document.getElementById("button-status");
        
          if (submitBtn.disabled) {
            statusDiv.style.display = "block";
          } else {
            statusDiv.style.display = "none";
          }
        }, 3000);
          // ‡πÅ‡∏™‡∏î‡∏á Loader 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
          setTimeout(function () {
            document.getElementById("loader").style.display = "none";
            document.getElementById("main-content").style.display = "block";
        
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 3 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏´‡∏•‡∏±‡∏á Loader ‡∏´‡∏≤‡∏¢)
            setTimeout(function () {
              const submitBtn = document.getElementById("submit-btn");
              const statusDiv = document.getElementById("button-status");
        
              if (submitBtn.disabled) {
                statusDiv.style.display = "block";
              }
            }, 3000);
          }, 4000);
    </script>

</body>
</html>
